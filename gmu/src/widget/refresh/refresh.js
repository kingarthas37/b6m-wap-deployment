!function(e,t,n){e.define("Refresh",{options:{load:null,statechange:null},_init:function(){var e=this,n=e._options;e.on("ready",function(){t.each(["up","down"],function(t,i){var s=n["$"+i+"Elem"],a=s.get(0);s.length&&(e._status(i,!0),(!a.childNodes.length||s.find(".ui-refresh-icon").length&&s.find(".ui-refresh-label").length)&&(!a.childNodes.length&&e._createBtn(i),n.refreshInfo||(n.refreshInfo={}),n.refreshInfo[i]={$icon:s.find(".ui-refresh-icon"),$label:s.find(".ui-refresh-label"),text:s.find(".ui-refresh-label").html()}),s.on("click",function(){e._status(i)&&!n._actDir&&(e._setStyle(i,"loading"),e._loadingAction(i,"click"))}))})}),e.on("destroy",function(){e.$el.remove()})},_create:function(){var e=this,t=e._options,n=e.$el;e._options.setup&&(t.$upElem=n.find(".ui-refresh-up"),t.$downElem=n.find(".ui-refresh-down"),n.addClass("ui-refresh"))},_createBtn:function(e){return this._options["$"+e+"Elem"].html('<span class="ui-refresh-icon"></span><span class="ui-refresh-label">加载更多</span>'),this},_setStyle:function(e,n){var i=this,s=t.Event("statechange");return i.trigger(s,i._options["$"+e+"Elem"],n,e),s.defaultPrevented?i:i._changeStyle(e,n)},_changeStyle:function(e,t){var n=this._options,i=n.refreshInfo[e];switch(t){case"loaded":i.$label.html(i.text),i.$icon.removeClass(),n._actDir="";break;case"loading":i.$label.html("加载中..."),i.$icon.addClass("ui-loading"),n._actDir=e;break;case"disable":i.$label.html("没有更多内容了")}return this},_loadingAction:function(e,n){var i=this,s=i._options,a=s.load;return t.isFunction(a)&&a.call(i,e,n),i._status(e,!1),i},afterDataLoading:function(e){var t=this,e=e||t._options._actDir;return t._setStyle(e,"loaded"),t._status(e,!0),t},_status:function(e,t){var i=this._options;return t===n?i["_"+e+"Open"]:i["_"+e+"Open"]=!!t},_setable:function(e,n,i){var s=this,a=s._options,o=n?[n]:["up","down"];return t.each(o,function(t,n){var o=a["$"+n+"Elem"];o.length&&(e?o.show():i?o.hide():s._setStyle(n,"disable"),s._status(n,e))}),s},disable:function(e,t){return this._setable(!1,e,t)},enable:function(e){return this._setable(!0,e)}})}(gmu,gmu.$);