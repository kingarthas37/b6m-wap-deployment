!function(t,e){function i(t,n){var s,o=e('<span class="ui-holder"></span>'),r=e('<div class="ui-slideup-wrap">   <div class="ui-slideup">       <div class="header">           <span class="ok-btn">确认</span>           <span class="no-btn">取消</span>       </div>       <div class="frame"></div>   </div></div>'),a=e(".ui-slideup",r),h=e(".frame",a),c={refresh:function(t){r.css({top:window.pageYOffset+"px",height:window.innerHeight+"px"}),a.animate({translateY:"-"+a.height()+"px",translateZ:"0"},400,"ease-out",function(){t&&t.call(c)})},close:function(n){var s=i.count=i.count-1;return r.off("click.slideup"+l),a.animate({translateY:"0",translateZ:"0"},200,"ease-out",function(){n&&n(),o.replaceWith(t),r.remove(),0===s&&e(document).off("touchmove.slideup")}).find(".ok-btn, .no-btn").highlight(),c}},l=i.id=(i.id>>>0)+1;return h.append(t.replaceWith(o)),s=i.count=(i.count>>>0)+1,1===s&&e(document).on("touchmove.slideup",function(t){t.preventDefault()}),r.on("click.slideup"+l,".ok-btn, .no-btn",function(){n.call(c,e(this).is(".ok-btn"))!==!1&&c.close()}).appendTo(document.body).find(".ok-btn, .no-btn").highlight("ui-state-hover"),c.refresh(),c}t.Calendar.register("picker",{_create:function(){var t=this.$el;if(!t)throw new Error("请指定日期选择器的赋值对象")},_init:function(){var t=this.$el,i=this._options;this._container=e("<div></div>"),i.date||(i.date=t[t.is("select, input")?"val":"text"]()),e(window).on("ortchange",e.proxy(this._eventHandler,this)),this.on("commit",function(i,n){var s=e.calendar.formatDate(n);t[t.is("select, input")?"val":"text"](s)}),this.on("destroy",function(){e(window).off("ortchange",this._eventHandler),this._frame&&this._frame.close()})},_eventHandler:function(t){"ortchange"===t.type?this._frame&&this._frame.refresh():this.origin(t)},show:function(){var t,n=this;return this._visible?this:(t=this._container,this._visible=!0,this.refresh(),this._frame=i(t,function(t){var i;return t?(i=n._option("selectedDate"),n.trigger("commit",i,e.calendar.formatDate(i),n),n._option("date",i)):n._option("selectedDate",n._option("date")),n.hide(),!1}),this.trigger("show",this))},hide:function(){var e,i=this;return this._visible?(e=new t.Event("beforehide"),this.trigger(e,this),e.isDefaultPrevented()?this:(this._visible=!1,this._frame.close(function(){i.trigger&&i.trigger("hide")}),this._frame=null,this)):this}})}(gmu,gmu.$);