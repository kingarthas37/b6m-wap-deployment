!function(t,e,i){var n=1,a=function(){return n++},s=/^#(.+)$/;t.define("Tabs",{options:{active:0,items:null,transition:"slide"},template:{nav:'<ul class="ui-tabs-nav"><% var item; for(var i=0, length=items.length; i<length; i++) { item=items[i]; %><li<% if(i==active){ %> class="ui-state-active"<% } %>><a href="javascript:;"><%=item.title%></a></li><% } %></ul>',content:'<div class="ui-viewport ui-tabs-content"><% var item; for(var i=0, length=items.length; i<length; i++) { item=items[i]; %><div<% if(item.id){ %> id="<%=item.id%>"<% } %> class="ui-tabs-panel <%=transition%><% if(i==active){ %> ui-state-active<% } %>"><%=item.content%></div><% } %></div>'},_init:function(){var t,i=this,n=i._options,a=e.proxy(i._eventHandler,i);i.on("ready",function(){t=i.$el,t.addClass("ui-tabs"),n._nav.on("tap",a).children().highlight("ui-state-hover")}),e(window).on("ortchange",a)},_create:function(){var t=this,i=t._options;t._options.setup&&t.$el.children().length>0?t._prepareDom("setup",i):(i.setup=!1,t.$el=t.$el||e("<div></div>"),t._prepareDom("create",i))},_prepareDom:function(t,i){var n,r,o,l,v=this,c=v.$el;switch(t){case"setup":if(i._nav=v._findElement("ul").first(),i._nav){i._content=v._findElement("div.ui-tabs-content"),i._content=(i._content&&i._content.first()||e("<div></div>").appendTo(c)).addClass("ui-viewport ui-tabs-content"),n=[],i._nav.addClass("ui-tabs-nav").children().each(function(){var t,r,o=v._findElement("a",this),l=o?o.attr("href"):e(this).attr("data-url");t=s.test(l)?RegExp.$1:"tabs_"+a(),(r=v._findElement("#"+t)||e('<div id="'+t+'"></div>')).addClass("ui-tabs-panel"+(i.transition?" "+i.transition:"")).appendTo(i._content),n.push({id:t,href:l,title:o?o.attr("href","javascript:;").text():e(this).text(),content:r})}),i.items=n,i.active=Math.max(0,Math.min(n.length-1,i.active||e(".ui-state-active",i._nav).index()||0)),v._getPanel().add(i._nav.children().eq(i.active)).addClass("ui-state-active");break}default:n=i.items=i.items||[],r=[],o=[],i.active=Math.max(0,Math.min(n.length-1,i.active)),e.each(n,function(t,e){l="tabs_"+a(),r.push({href:e.href||"#"+l,title:e.title}),o.push({content:e.content||"",id:l}),n[t].id=l}),i._nav=e(this.tpl2html("nav",{items:r,active:i.active})).prependTo(c),i._content=e(this.tpl2html("content",{items:o,active:i.active,transition:i.transition})).appendTo(c),i.container=i.container||(c.parent().length?null:"body")}i.container&&c.appendTo(i.container),v._fitToContent(v._getPanel())},_getPanel:function(t){var n=this._options;return e("#"+n.items[t===i?n.active:t].id)},_findElement:function(t,i){var n=e(i||this.$el).find(t);return n.length?n:null},_eventHandler:function(t){var i,n=this._options;switch(t.type){case"ortchange":this.refresh();break;default:(i=e(t.target).closest("li",n._nav.get(0)))&&i.length&&(t.preventDefault(),this.switchTo(i.index()))}},_fitToContent:function(t){var e=this._options,n=e._content;return e._plus===i&&(e._plus=parseFloat(n.css("border-top-width"))+parseFloat(n.css("border-bottom-width"))),n.height(t.height()+e._plus),this},switchTo:function(i){var n,a,s,r,o,l=this,v=l._options,c=v.items;if(!v._buzy&&v.active!=(i=Math.max(0,Math.min(c.length-1,i)))){if(a=e.extend({},c[i]),a.div=l._getPanel(i),a.index=i,s=e.extend({},c[v.active]),s.div=l._getPanel(),s.index=v.active,n=t.Event("beforeActivate"),l.trigger(n,a,s),n.isDefaultPrevented())return l;v._content.children().removeClass("ui-state-active"),a.div.addClass("ui-state-active"),v._nav.children().removeClass("ui-state-active").eq(a.index).addClass("ui-state-active"),v.transition&&(v._buzy=!0,o=e.fx.animationEnd+".tabs",r=i>v.active?"":" reverse",v._content.addClass("ui-viewport-transitioning"),s.div.addClass("out"+r),a.div.addClass("in"+r).on(o,function(t){t.target==t.currentTarget&&(a.div.off(o,arguments.callee),v._buzy=!1,s.div.removeClass("out reverse"),a.div.removeClass("in reverse"),v._content.removeClass("ui-viewport-transitioning"),l.trigger("animateComplete",a,s),l._fitToContent(a.div))})),v.active=i,l.trigger("activate",a,s),v.transition||l._fitToContent(a.div)}return l},refresh:function(){return this._fitToContent(this._getPanel())},destroy:function(){var t=this._options,e=this._eventHandler;return t._nav.off("tap",e).children().highlight(),t.swipe&&t._content.off("swipeLeft swipeRight",e),t.setup||this.$el.remove(),this.$super("destroy")}})}(gmu,gmu.$);