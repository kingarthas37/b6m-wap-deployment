!function(t){var e=/^#.+$/,i={},r={loading:'<div class="ui-loading">Loading</div>',error:'<p class="ui-load-error">内容加载失败!</p>'};gmu.Tabs.register("ajax",{_init:function(){var t,i,r,o=this._options;this.on("ready",function(){for(t=o.items,i=0,r=t.length;r>i;i++)t[i].href&&!e.test(t[i].href)&&(t[i].isAjax=!0);this.on("activate",this._onActivate),t[o.active].isAjax&&this.load(o.active)})},destroy:function(){return this.off("activate",this._onActivate),this.xhr&&this.xhr.abort(),this.origin()},_fitToContent:function(t){var e=this._options;return e._fitLock?void 0:this.origin(t)},_onActivate:function(t,e){e.isAjax&&this.load(e.index)},load:function(e,o){var n,a,s,u=this,d=u._options,c=d.items;return 0>e||e>c.length-1||!(n=c[e])||!n.isAjax||(a=u._getPanel(e)).text()&&!o&&i[e]?this:((s=u.xhr)&&setTimeout(function(){s.abort()},400),d._loadingTimer=setTimeout(function(){a.html(r.loading)},50),d._fitLock=!0,u.xhr=t.ajax(t.extend(d.ajax||{},{url:n.href,context:u.$el.get(0),beforeSend:function(t,e){var i=gmu.Event("beforeLoad");return u.trigger(i,t,e),i.isDefaultPrevented()?!1:void 0},success:function(t,r){var o=gmu.Event("beforeRender");clearTimeout(d._loadingTimer),u.trigger(o,t,a,e,r),o.isDefaultPrevented()||a.html(t),d._fitLock=!1,i[e]=!0,u.trigger("load",a),delete u.xhr,u._fitToContent(a)},error:function(){var t=gmu.Event("loadError");clearTimeout(d._loadingTimer),i[e]=!1,u.trigger(t,a),t.isDefaultPrevented()||a.html(r.error),delete u.xhr}})),void 0)}})}(Zepto);